---
layout: post
title: &#8220;attention to detail&#8221;
---

I had recently seen [flexslider](http://flex.madebymufffin.com/) when our designer asked for a recommendation on a slideshow plugin to use on some pages he was prototyping.

as we got closer to production pages based on those prototypes, we noticed a flash when the slideshow is initialized, with the "slide" animation and "animation loop" options are specified.

that combination results in a "carousel" or "infinite loop" behavior, where the next slide always appears from the left or right, with a previous or next movement, respectively. [example slideshow with flexslider and those options](/examples/ss/flexslider.html).

flexslider's approach to achieve this is clever. with a slideshow of three elements:

{% highlight html %}
<div class="flexslider">
    <ul class="slides">
        <li><img src="http://media.danmarvelo.us/31491.jpg" /></li>
        <li><img src="http://media.danmarvelo.us/31461.jpg" /></li>
        <li><img src="http://media.danmarvelo.us/31471.jpg" /></li>
    </ul>
</div>
{% endhighlight %}

the containing `<ul>` is styled such that the first element is visible:

{% highlight text %}
            +-----------+-----------+-----------+
            | \           \         |           |
            |  +-----------+        |           |
            |  |           |  2     |     3     |
            |  |           |        |           |
            |  |     1     |        |           |
            +--|           |--------+-----------+
              \|           |
               +-----------+
{% endhighlight %}

when initialized with those options, copies of the first and last slides are added.

{% highlight html %}
<div class="flexslider">
    <ul class="slides">
        <li><img src="http://media.danmarvelo.us/31471.jpg" /></li>
        <li><img src="http://media.danmarvelo.us/31491.jpg" /></li>
        <li><img src="http://media.danmarvelo.us/31461.jpg" /></li>
        <li><img src="http://media.danmarvelo.us/31471.jpg" /></li>
        <li><img src="http://media.danmarvelo.us/31491.jpg" /></li>
    </ul>
</div>
{% endhighlight %}

{% highlight text %}
            +-----------+-----------+-----------+-----------+-----------+
            | \           \         |           |           |           |
            |  +-----------+        |           |           |           |
            |  |           |  1     |     2     |     3     |  1(copy)  |
            |  |           |        |           |           |           |
            |  |  3(copy   |        |           |           |           |
            +--|           |--------+-----------+-----------+-----------+
              \|           |
               +-----------+
{% endhighlight %}

then styles on the `<ul>` are modified so the first slide is visible:

{% highlight text %}
+-----------+-----------+-----------+-----------+-----------+
|           | \           \         |           |           |
|    <--    |  +-----------+        |           |           |
|  3(copy)  |  |           |  2     |     3     |  1(copy)  |
|           |  |           |        |           |           |
|           |  |     1     |        |           |           |
+-----------+--|           |--------+-----------+-----------+
              \|           |
               +-----------+
{% endhighlight %}

(hint: that's where the visible flash comes in.)

when the last slide is visible,

{% highlight text %}
+-----------+-----------+-----------+
|           | \           \         |
|           |  +-----------+        |
|     2     |  |           |1(copy) |
|           |  |           |        |
|           |  |     3     |        |
+-----------+--|           |--------+
              \|           |
               +-----------+
{% endhighlight %}

and moving to first the slide, the copy of the first slide comes in to view:

{% highlight text %}
          <----
+-----------+-----------+
|           | \           \
|           |  +-----------+
|     3     |  |           |
|           |  |           |
|           |  |  1(copy)  |
+-----------+--|           |
              \|           |
               +-----------+
{% endhighlight %}

after the animation is finished, the styles of the `<ul>` are reset so the original last slide is visible.

{% highlight text %}
+-----------+-----------+-----------+-----------+-----------+
|           | \           \         |           |           |
|    <--    |  +-----------+        |           |           |
|  3(copy)  |  |           |  2     |     3     |  1(copy)  |
|           |  |           |        |           |           |
|           |  |     1     |        |           |           |
+-----------+--|           |--------+-----------+-----------+
              \|           |
               +-----------+
{% endhighlight %}

even if the flash while the slides are arranging initially is tolerable, accomodating those extra slides is cumbersome in code.

my initial attempts to modify the flexslider plugin led me to look for a plugin that made less implementation decisions.

like Mr. Wunsch's [jquery-renewal](https://github.com/mwunsch/jquery-renewal). [from his post about it](http://mwunsch.tumblr.com/post/8821589034/jquery-renewal):

> jquery-renewal provides enough to make just the kind of carousel you want. It tries to be as lightweight as possible, providing a very simple API for moving through the elements.

(slide diagrams here based on jquery-renewal's readme.)

a [fork of jquery-renewal](https://github.com/Talby/jquery-renewal/) implements the "infinite loop" using the same element copy approach. [example slideshow using that fork of jquery-renewal](/examples/ss/carousel.html).

and produces the same flash upon initialize. I think achieving the approach without cloning html elements could help.

when the the last item is visible,

{% highlight text %}
+-----------+-----------+
|           | \           \
|           |  +-----------+
|     2     |  |           |
|           |  |           |
|           |  |     3     |
+-----------+--|           |
              \|           |
               +-----------+
{% endhighlight %}

and the moving to the first element, first create space through padding for the element to the right.

{% highlight text %}
+-----------+-----------+-----------+
|           | \           \         |
|           |  +-----------+        |
|     2     |  |           |padding |
|           |  |           |        |
|           |  |     3     |        |
+-----------+--|           |--------+
              \|           |
               +-----------+
{% endhighlight %}

move the first slide in to that space though `position:absolute`:

{% highlight text %}
+-----------+-----------+-----------+
|           | \           \         |
|           |  +-----------+        |
|     2     |  |           |   1    |
|           |  |           |        |
|           |  |     3     |        |
+-----------+--|           |--------+
              \|           |
               +-----------+
{% endhighlight %}

slide the first slide to the visible position:

{% highlight text %}
          <----
+-----------+-----------+
|           | \           \
|           |  +-----------+
|     3     |  |           |
|           |  |           |
|           |  |     1     |
+-----------+--|           |
              \|           |
               +-----------+
{% endhighlight %}

then, as before, reset the styles for the container and first element:

{% highlight text %}
            +-----------+-----------+-----------+
            | \           \         |           |
            |  +-----------+        |           |
            |  |           |  2     |     3     |
            |  |           |        |           |
            |  |     1     |        |           |
            +--|           |--------+-----------+
              \|           |
               +-----------+
{% endhighlight %}

[example slideshow using jquery-renewal with tweaks to allow custom transition styles](/examples/ss/carousel-2.html).

there probably is still a flash, but it's quick enough to be imperceptible to my eyes.